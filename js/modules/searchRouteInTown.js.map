{"version":3,"names":[],"mappings":"","sources":["modules/searchRouteInTown.js"],"sourcesContent":["import showRoute from \"./showRoute.js\";\r\n\r\n\r\nexport default function searchRouteInTown(routeData) {\r\n  const town = document.querySelector('#townSelector').value;\r\n  const key = new RegExp(town)\r\n  const routeContainer = document.querySelector('#routeResultContainer');\r\n  const routeResult = [];\r\n  let routes = '';\r\n\r\n  routeData.forEach(route => {\r\n    if (key.test(route.Town)) \r\n      routeResult.push(route);\r\n  });\r\n\r\n  routeResult.forEach(route => {\r\n    let name = route.RouteName;\r\n    let start = route.RoadSectionStart || '無資料';\r\n    let end = route.RoadSectionEnd || '無資料';\r\n    let length = route.CyclingLength + 'm' || '';\r\n    let direction = route.Direction || '';\r\n    let routeSection = route.Geometry || '無資料';\r\n\r\n    routes += `\r\n      <a href=\"#\" class=\"searchRouteResult list-group-item list-group-item-action border-0 border-bottom p-3 pe-4\" title=\"顯示路線位置\" data-section=\"${routeSection}\">\r\n      <h5 class=\"fw-700 mb-1 fs-15 mb-0\" data-section=\"${routeSection}\">${name}</h5>\r\n        <p class=\"fw-500 fs-14 mb-0\" data-section=\"${routeSection}\">起點：${start}</p>\r\n        <p class=\"fw-500 mb-1 fs-14 mb-0\" data-section=\"${routeSection}\">終點：${end}</p>\r\n        <small class=\"fs-12 lh-sm\r\n        lh-sm\" data-section=\"${routeSection}\">${length}</small>\r\n        <small class=\"fs-12 lh-sm\r\n        lh-sm text-info ms-4\" data-section=\"${routeSection}\">${direction}</small>\r\n      </a>\r\n    `;\r\n  })\r\n\r\n  routeContainer.innerHTML = routes;\r\n\r\n  const searchRouteResults = document.querySelectorAll('.searchRouteResult');\r\n  searchRouteResults.forEach(result => {\r\n    result.addEventListener('click', e => {\r\n      e.preventDefault()\r\n\r\n      // the show route function\r\n      showRoute(e);\r\n\r\n    })\r\n  })\r\n\r\n}"],"file":"searchRouteInTown.js"}